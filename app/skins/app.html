<% extends './base.html' %>

<% subskin header %>
   <% if not <% statifier %> render networkingExternals %>
   
   <% if <% statifier %> render statifierStartUp %>
   <% if not <% statifier %> render normalStartUp %>
   
	<title><% appName %> @ gamejs.org</title>

<% subskin content %>
   <div>
      <h1> <% appName %> </h1>
      <div id="game-header">
      </div>
      
      <canvas id="jsgamecanvas"></canvas>
      
      <div id="game-footer">
      </div>
      <p>
         <a href="/"><-- Dashboard</a>
      </p>
   </div>

<% subskin networkingExternals %>
   <!-- // START WEBSOCKET STUFF -->
   <script src="<% resourceHref util-websocket-fallback /javascript/swfobject.js %>"></script>
   <script src="<% resourceHref util-websocket-fallback /javascript/FABridge.js %>"></script>
   <script src="<% resourceHref util-websocket-fallback /javascript/web_socket.js %>"></script>
   
   <script src="<% resourceHref util-jquery /javascript/jquery-1.4.2.min.js %>"></script>
   <script src="<% resourceHref util-handlebars /javascript/handlebars.js %>"></script>

   <script>
   WEB_SOCKET_SWF_LOCATION = "<% resourceHref util-websocket-fallback /flash/WebSocketMain.swf %>";
   // Set this to dump debug message from Flash to console.log:
   WEB_SOCKET_DEBUG = false;
   </script>

   <!-- // END WEBSOCKET STUFF -->

<% subskin statifierStartUp %>
   <script>
      if (!window.console) {
         window.console = {log: function() {}};
      }
      var $g = {};
      $g.resourceBaseHref = './';
   </script>
   <script src="./javascript/jquery.js"></script>
   <script src="./javascript/main.js"></script>

<% subskin normalStartUp %>
	<script>
	   var $g = {};
	   $g.appId = '<% appId %>';
	   $g.resourceBaseHref = '<% resourceHref <% appId %> %>';
	   $g.websocketHost = '<% websocketHost %>';
	</script>
	<script src="<% mainScriptHref <% appId %> %>" type="text/javascript" charset="utf-8"></script>

